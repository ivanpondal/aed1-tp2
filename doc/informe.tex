% Clase y configuracion de tipo de documento
\documentclass[10pt,a4paper,spanish]{article}
% Inclusion de paquetes
\usepackage{a4wide}
\usepackage{amsmath, amscd, amssymb, amsthm, latexsym}
\usepackage[spanish]{babel}
\usepackage[utf8]{inputenc}
\usepackage[width=15.5cm, left=3cm, top=2.5cm, height= 24.5cm]{geometry}
\usepackage{fancyhdr}
\pagestyle{fancyplain}
\usepackage{listings}
\usepackage{enumerate}
\usepackage{xspace}
\usepackage{longtable}
\usepackage{caratula}
% incluye macros espec materia
\include{algo1-cmds}

% Encabezado
\lhead{Algoritmos y Estructuras de Datos I}
\rhead{Grupo 07}
% Pie de pagina
\renewcommand{\footrulewidth}{0.4pt}
\lfoot{Facultad de Ciencias Exactas y Naturales}
\rfoot{Universidad de Buenos Aires}

\begin{document}

% Datos de caratula
\materia{Algoritmos y Estructuras de Datos I}
\titulo{Trabajo Pr\'actico N\'umero 2}
%\subtitulo{}
\grupo{Grupo: 07}

\integrante{Demartino, Francisco}{348/14}{demartino.francisco@gmail.com}
\integrante{Frachtenberg Goldsmit, Kevin}{247/14}{kevinfra94@gmail.com}
\integrante{Gomez, Horacio}{756/13}{horaciogomez.1993@gmail.com}
\integrante{Pondal, Iván}{078/14}{ivan.pondal@gmail.com}

\maketitle

\newpage

% Para crear un indice
%\tableofcontents

% Forzar salto de pagina
\clearpage

% Pueden modularizar el documento incluyendo otros .tex
% \include{observaciones}

% \section{Observaciones}
%
% 	\begin{enumerate}
% 		\item un item
% 		\item otro item
% 	\end{enumerate}

% Otro salto de pagina
% \newpage

\section{Especificación}

\begin{ejercicio}

	\begin{problema}{posicionesMasOscuras}{i:Imagen}{res:[(\ent, \ent)]}
		\asegura{mismos(res, [(x,y) \ | \ y \leftarrow [0..alto(i)),x \leftarrow [0..ancho(i)),
		\newline sumaCanalesPixel(color(i, x, y)) == menorSumaCanales(i)]) }
	\end{problema}

\end{ejercicio}

\begin{ejercicio}
	\begin{problema}{top10}{g: Galeria}{result : [Imagen]}
		\asegura{
			(|imagenes(g)|<10) \rightarrow \newline result == listaImagenesOrdenadasVotos(g, imagenes(g))
		}
		\asegura{
			(|imagenes(g)| \geq 10) \rightarrow \newline result == listaImagenesOrdenadasVotos(g, imagenes(g))[0$..$10)
		}
	\end{problema}
\end{ejercicio}

\begin{ejercicio}
	\begin{problema}{laMasChiquitaConPuntoBlanco}{g:Galeria}{result:Imagen}
		\requiere { |listaImagenesConPixelBlanco(imagenes(g))|>0 }
		\asegura {result == listaImagenesOrdenadasTama\tilde{n}o(listaImagenesConPixelBlanco(imagenes(g)))[0] }
	\end{problema}
\end{ejercicio}

\begin{ejercicio}

	\begin{problema*}{agregarImagen}{g:Galeria, i: Imagen}
		\modifica{g}
		\asegura[lasDeAntesEstanConSusVotos] {
			(\forall j \leftarrow imagenes(pre(g))) \newline
			j \in imagenes(g) \land votos(g, j) == votos(pre(g), j) }
		\asegura[lasQueEstanSalvoLaQueAgregoVienenDeAntes] {
			(\forall j \leftarrow imagenes(g), j \neq i) \newline
			j \in imagenes(pre(g))
		}
		\asegura [siAgregoNuevaEntraConCeroVotos]{ i \notin imagenes(pre(g)) \rightarrow \newline ( i \in imagenes(g) \land votos(g, i) == 0) }
	\end{problema*}

\end{ejercicio}

\begin{ejercicio}
      \begin{problema*}{votar}{g: Galeria, i: Imagen}
		\requiere[noSeVotaCualquierCosa]{i \in imagenes(pre(g)}
		\modifica{g}
		\asegura[noCambianLasImagenes]{ mismos(imagenes(g), imagenes(pre(g))) }
		\asegura[noSeTocanLosVotosDeLosOtros]{ (\forall m \leftarrow imagenes(g), m \neq i)\ votos(g, m) == votos(pre(g), m)}
		\asegura[elQueSeVotaSumaUno]{ votos(g,i) == votos(pre(g), i) + 1 }
      \end{problema*}

\end{ejercicio}

\begin{ejercicio}

	\begin{problema*}{eliminarMasVotada}{g: Galeria}
		\requiere[noVacia]{|imagenes(pre(g))| > 0}
		\modifica{g}
		\asegura[seVaUnaSola]{|imagenes(g)| == |imagenes(pre(g))| - 1 }
		\asegura[siSeVaEsGrosa]{ (\forall i \leftarrow imagenes(pre(g)),\ i \notin imagenes(g)) \newline
			votos(g, i) == maximo(todosLosVotos(g)) }
		\asegura[lasQueEstanVienenDeAntesConSusVotos] {
			(\forall i \leftarrow imagenes(g)) \newline
			i \in imagenes(pre(g)) \land
			votos(g, i) == votos(pre(g), i)
		}

	\end{problema*}


\end{ejercicio}

% \subsection{Ejercicio X}
\newpage
\subsection{Auxiliares}

\begin{itemize}
	\item \auxil{cuenta(x:T, a:\TLista{T}) : \ent}{
			\longitud {
			  \TLista{1 \ | \ y \leftarrow a, y==x}
			}
	}

	\item \auxil{mismos(a, b: \TLista{T}) : Bool}{
		|a| == |b| \land (\forall c \leftarrow a) cuenta(c,a) == cuenta(c,b)
	}

	\item \auxil{minimo(l : [\ent]) : \ent}{
	   [x \ | \ x \leftarrow l ,(\forall y \leftarrow l) x \leq y)][0]
	}

	\item \auxil{maximo(l : [\ent]) : \ent}{
		[x \ | \ x \leftarrow l ,(\forall y \leftarrow l) x \geq y)][0]
	}

	\item \auxil{sumaCanalesPixel(p : Pixel) : \ent}{
	   red(p) + green(p) + blue(p)
	}

	\item \auxil{listaSumaCanalesPixeles(i: Imagen) : \TLista{\ent}}{ \newline
	  [ sumaCanalesPixel(color(i, x, y))\ | \ y \leftarrow [0..alto(i)), x \leftarrow [0..ancho(i))]
	}

	\item \auxil{menorSumaCanales(i: Imagen) : \ent}{
	  minimo(listaSumaCanalesPixeles(i))
	}

	\item \auxil{todosLosVotos(g: Galeria) : [\ent]}{
	  [votos(g, i) | i \leftarrow imagenes(g)]
	}

	\item \auxil{cantPixeles(i: Imagen) : \ent}{
	  ancho(i)*alto(i)
	}

	\item \auxil{esPixelBlanco(px: Pixel) : Bool}{
	  red(px) == green(px) == blue(px) == 255
	}

	\item \auxil{tienePixelBlanco(i: Imagen) : Bool}{ \newline
	  alguno([esPixelBlanco(color(i,x,y)) | y \leftarrow [0..alto(i)),x \leftarrow [0..ancho(i))])
	}

	\item \auxil{listaImagenesConPixelBlanco(imgs: [Imagen]) : [Imagen]}{
	  [im \ | \ im \leftarrow imgs, tienePixelBlanco(im)]
	}

	\item \auxil{cuentaMenosPixeles(imgs: [Imagen], img: Imagen) : \ent}{ \newline
	  |[1 \ | \ im \leftarrow imgs, cantPixeles(im)<cantPixeles(img)]|
	}

	\item \auxil{cuentaMasVotos(g: Galeria, imgs: [Imagen], img: Imagen) : \ent}{ \newline
	  |[1 \ | \ im \leftarrow imgs, votos(g,im)>votos(g,img)]|
	}

	\item \auxil{listaImagenesOrdenadasVotos(g: Galeria, imgs: [Imagen]) : [Imagen]}{ \newline
	  [im \ | \ i \leftarrow [0..|imgs|),im \leftarrow imgs, cuentaMasVotos(g,imgs,im)==i]
	}

	\item \auxil{listaImagenesOrdenadasTama\tilde{n}o(imgs: [Imagen]) : [Imagen]}{ \newline
	  [im \ | \ i \leftarrow [0..|imgs|),im \leftarrow imgs, cuentaMenosPixeles(imgs,im)==i]
	}

\end{itemize}

\section{abs e invRep de Galería}


\end{document}
